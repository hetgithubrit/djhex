<%- include('../partials/head', { title: 'Gallery', navLinks, currentPath }) %>

  <div class="wrapper">
    <section class="section" id="gallery">
      <div class="section-head">
        <div>
          <div class="pill">Gallery</div>
          <h2>Moments & vibes</h2>
        </div>
      </div>
      
      <div id="gallery-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4">
        <% galleryItems.forEach(item => { %>
          <div class="group relative w-full h-[500px] lg:h-[600px] cursor-pointer overflow-hidden rounded-xl bg-white/5 border border-white/10 shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1" onclick="openLightbox('<%= item.src %>')">
            <img 
              src="<%= item.src %>" 
              alt="DJ Hex Event - <%= item.title %>" 
              class="w-full h-full object-cover <%= item.align || 'object-center' %> transition-transform duration-500 group-hover:scale-110"
              loading="lazy"
            >
          </div>
        <% }) %>
      </div>
    </section>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="fixed inset-0 z-50 bg-black/95 backdrop-blur-md hidden items-center justify-center p-4">
    <button class="absolute top-6 right-6 text-white text-5xl font-light hover:text-gray-300 transition-colors lightbox-close">&times;</button>
    <img id="lightbox-img" src="" alt="Full size" class="max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl scale-95 transition-transform duration-300">
  </div>

<%- include('../partials/footer', { year }) %>

<script>
  function openLightbox(src) {
    const lightbox = document.getElementById('lightbox');
    const img = document.getElementById('lightbox-img');
    img.src = src;
    lightbox.classList.remove('hidden');
    lightbox.classList.add('flex');
    setTimeout(() => img.classList.remove('scale-95'), 10);
  }

  document.querySelector('.lightbox-close').addEventListener('click', () => {
    const lightbox = document.getElementById('lightbox');
    lightbox.classList.add('hidden');
    lightbox.classList.remove('flex');
  });

  document.getElementById('lightbox').addEventListener('click', (e) => {
    if (e.target === e.currentTarget) {
      e.currentTarget.classList.add('hidden');
      e.currentTarget.classList.remove('flex');
    }
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        const lightbox = document.getElementById('lightbox');
        lightbox.classList.add('hidden');
        lightbox.classList.remove('flex');
    }
  });
</script>
